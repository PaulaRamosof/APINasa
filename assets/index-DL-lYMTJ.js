(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const m="dcWpeSNP3od3qigJGptkggZQu5hedMUeairzwK1Q",p="https://api.nasa.gov/planetary/apod",l=document.getElementById("datePicker"),g=document.getElementById("searchBtn"),y=document.getElementById("title"),h=document.getElementById("date"),c=document.getElementById("mediaContainer"),E=document.getElementById("explanation"),v=document.getElementById("favBtn"),a=document.getElementById("favoritesList");l.max=new Date().toISOString().split("T")[0];async function d(t=""){try{const r=await(await fetch(`${p}?api_key=${m}&date=${t}`)).json();u(r)}catch(e){console.error("Error al obtener APOD:",e)}}function u(t){if(y.textContent=t.title,h.textContent=t.date,E.textContent=t.explanation,c.innerHTML="",t.media_type==="image"){const e=document.createElement("img");e.src=t.url,e.alt=t.title,c.appendChild(e)}else if(t.media_type==="video"){const e=document.createElement("iframe");e.src=t.url,e.width="100%",e.height="400",c.appendChild(e)}v.onclick=()=>I(t)}function I(t){const e=JSON.parse(localStorage.getItem("favorites"))||[];e.some(r=>r.date===t.date)||(e.push(t),localStorage.setItem("favorites",JSON.stringify(e)),f())}function f(){a.innerHTML="",(JSON.parse(localStorage.getItem("favorites"))||[]).forEach(e=>{const r=document.createElement("li");r.textContent=`${e.date} - ${e.title}`,r.style.cursor="pointer",r.onclick=()=>u(e),a.appendChild(r)})}g.addEventListener("click",()=>{const t=l.value;if(new Date(t)>new Date){alert("No puedes seleccionar una fecha futura");return}d(t)});d();f();
